!function(a){function b(){var b="";i.each(function(c){b+='<div class="parallaks-background-wrapper" id="parallaks-'+c+'"><img src="'+a(this).attr("data-imgsrc")+'" /></div>'}),a("body").prepend(b),i.each(function(b){var c=a(this),d=a("#parallaks-"+b),e=c.attr("data-originalwidth"),f=c.attr("data-originalheight");p[b]={el:d[0]},q[b]={el:d.find("img")[0],originalWidth:e,originalHeight:f,imgRatio:e/f}})}function c(){i.each(function(b){a(this).append('<img src="'+a(this).attr("data-imgsrc")+'" class="parallaks-background-wrapper--img" />'),q[b]={el:a(this).find("img")[0]}})}function d(){var a;if(/MSIE (\d+\.\d+);/.test(navigator.userAgent))a=!1;else for(var b="transform webkitTransform mozTransform oTransform msTransform".split(" "),c=(document.createElement("div"),0);void 0===a;)a=void 0!=document.createElement("div").style[b[c]]?b[c]:void 0,c++;return a}function e(a,b,c){a.style[k]="translate3d("+b+"px, "+c+"px,0)"}function f(){if(m==window.pageYOffset)return l.call(window,f),!1;m=window.pageYOffset;var a=0;for(a=0;g>a;a++)m>=p[a].start-n&&m<=p[a].stop?("block"!=p[a].el.style.display&&(p[a].el.style.display="block"),"visible"!=q[a].el.style.visibility&&(q[a].el.style.visibility="visible"),e(p[a].el,0,i[a].offsetTop-r-m),e(q[a].el,q[a].positionX,(i[a].offsetTop-m)*p[a].speed*-1)):"none"!=p[a].el.style.display&&(p[a].el.style.display="none",q[a].el.style.visibility="hidden");l.call(window,f)}var g,h,i,j,k=d(),l=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||!1,m=(window.cancelAnimationFrame||window.mozCancelAnimationFrame,-1),n=window.innerHeight,o=window.innerWidth,p=[],q=[],r=parseInt(a("body").css("padding-top"));a.fn.parallaks=function(d){h=a.extend({doParallax:!0},d);a(this).eq(0);i=this,g=i.length,(0==l||"undefined"==typeof window.pageYOffset||/MSIE (\d+\.\d+);/.test(navigator.userAgent))&&(h.doParallax=!1),h.doParallax?(b(),setParallaksData(),j=l(f),a(window).on("resize.parallaks",function(){setParallaksData()})):(a("body").addClass("no-parallaks"),c(),setUnCoolSize(),a(window).on("resize.parallaks",function(){setUnCoolSize()}))},getImgSizeData=function(a,b,c,d){var e=b?.9*c:.5*c,f=d,g=a.originalHeight*(f/a.originalWidth),h=0;return e>g&&(g=e,f=a.originalWidth*(g/a.originalHeight)),f>window.innerWidth&&(h=parseInt((d-f)/2)),{newImgWidth:f,newImgHeight:g,positionX:h}},setParallaksData=function(){m=-1,n=parseInt(window.innerHeight),o=parseInt(window.innerWidth),elementHeight=parseInt(.6*n);var a=0;for(a=0;g>a;a++)imgSizeData=getImgSizeData(q[a],!0,n,o),i[a].style.height=elementHeight+"px",p[a].el.style.height=elementHeight+"px",p[a].el.style.display="block",p[a].height=elementHeight,p[a].start=i[a].getBoundingClientRect().top+window.pageYOffset,p[a].stop=p[a].start+elementHeight,p[a].speed=i[a].getAttribute("data-parallaksspeed"),q[a].el.style.width=imgSizeData.newImgWidth+"px",q[a].el.style.height=imgSizeData.newImgHeight+"px",q[a].positionX=imgSizeData.positionX,p[a].el.setAttribute("data-start",p[a].start),p[a].el.setAttribute("data-stop",p[a].stop),q[a].el.setAttribute("data-positionX",q[a].positionX)},setUnCoolSize=function(){if(window.innerWidth!=o){imgSizeData=getImgSizeData(q[a],!1,n,o),n=parseInt(window.innerHeight),o=parseInt(window.innerWidth);for(var a=0;g>a;a++)q[a].el.style.width=imgSizeData.newImgWidth+"px",q[a].el.style.height=imgSizeData.newImgHeight+"px",q[a].el.style.left=parseInt(imgSizeData.positionX)+"px"}}}(jQuery);